--- luci-app-openclash/luasrc/view/openclash/update.htm
+++ luci-app-openclash/luasrc/view/openclash/update.htm
@@ -4,513 +4,925 @@
 }
 </style>
 
-<fieldset class="cbi-section">
-	<table width="100%">
-	  <tr><td width="100%" colspan="6">
-	    <p align="center" id="update_tip">
-	  		<b><%:Note: if the update fails, you can manually download and upload%></b>
-	  	</p>
-	  </td></tr>
-	  <tr><td width="16.6%" align="right"><%:Compiled Version%></td>
-	  	<td width="16.6%" align="left">
-			<select class="cbi-input-select" name="CORE_VERSION" id="CORE_VERSION">
-	  			<option value="linux-386"><%:linux-386%></option>
-				<option value="linux-amd64-v1"><%:linux-amd64-v1(x86-64)%></option>
-				<option value="linux-amd64-v2"><%:linux-amd64-v2(x86-64)%></option>
-				<option value="linux-amd64-v3"><%:linux-amd64-v3(x86-64)%></option>
-				<option value="linux-armv5"><%:linux-armv5%></option>
-				<option value="linux-armv6"><%:linux-armv6%></option>
-				<option value="linux-armv7"><%:linux-armv7%></option>
-				<option value="linux-arm64"><%:linux-arm64(armv8)%></option>
-				<option value="linux-loong64-abi1"><%:linux-loong64-abi1%></option>
-				<option value="linux-loong64-abi2"><%:linux-loong64-abi2%></option>
-				<option value="linux-riscv64"><%:linux-riscv64%></option>
-				<option value="linux-s390x"><%:linux-s390x%></option>
-				<option value="linux-mips-hardfloat"><%:linux-mips-hardfloat%></option>
-				<option value="linux-mips-softfloat"><%:linux-mips-softfloat%></option>
-				<option value="linux-mips64"><%:linux-mips64%></option>
-				<option value="linux-mips64le"><%:linux-mips64le%></option>
-				<option value="linux-mipsle-softfloat"><%:linux-mipsle-softfloat%></option>
-				<option value="linux-mipsle-hardfloat"><%:linux-mipsle-hardfloat%></option>
-				<option value="0"><%:Not Set%></option>
-	  		</select>
-		</td>
-	  	<td width="16.6%" align="right"><%:Release Branch%></td>
-	  	<td width="16.6%" align="left"><select class="cbi-input-select" name="RELEASE_BRANCH" id="RELEASE_BRANCH">
-	  		<option value="master">Master</option>
-			<option value="dev">Developer</option>
-	  	</select></td>
-		<td width="16.6%" align="right"><%:Smart Core%> <a href="javascript:void(0);" onclick="window.open('https://github.com/vernesong/mihomo/releases', '_blank');" style="color: #0066cc; text-decoration: none;" title="<%:View core infos that support smart group%>"> (?)</a></td>
-	  	<td width="16.6%" align="left"><select class="cbi-input-select" name="SMART_ENABLE" id="SMART_ENABLE">
-	  		<option value="0"><%:Disabled%></option>
-			<option value="1"><%:Enable%></option>
-	  	</select></td>
-	  	</tr>
-	</table>
-</fieldset>
-<fieldset class="cbi-section">
-	<table width="100%">
-		<tr><td width="100%" colspan="4">
-	    <p align="center">
-	  		<b><%:Core Update%></b>
-	  	</p>
-	  	</td></tr>
-	  	<tr><td width="100%" colspan="4">
-		<tr>
-			<td width="25%"><%:CPU Architecture%></td><td width="25%" align="left" id="CPU_MODEL"><%:Collecting data...%></td>
-			<td width="25%"><%:Last Check Update%></td><td width="25%" align="left" id="CHECKTIME"><%:Collecting data...%></td>
-		</tr>
-	  	<tr><td width="100%" colspan="4">
-	    <p align="center">
-	  		<b><%:Core path:%>/etc/openclash/core/clash_meta</b>
-	  	</p>
-	  	</td></tr>
-		<tr><td width="25%">[Meta] <%:Current Core%></td><td width="25%" align="left" id="CORE_META_CV"><%:Collecting data...%></td><td width="25%">[Meta] <%:Latest Core%></td><td width="25%" align="left" id="CORE_META_LV"><%:Collecting data...%></td></tr>
-		<tr><td width="25%"><%:Update Core%></td><td width="25%" align="left" id="core_meta_up"><%:Collecting data...%></td><td width="25%"><%:Download Latest Core%></td><td width="25%" align="left" id="ma_core_meta_up"><%:Collecting data...%></td></tr>
-	</table>
-</fieldset>
-<fieldset class="cbi-section">
-	<table width="100%">
-		<tr><td width="100%" colspan="4">
-	    <p align="center">
-	  		<b><%:Client Update%></b>
-	  	</p>
-	  	</td></tr>
-		<tr><td width="25%"><%:Current Client%></td><td width="25%" align="left" id="OP_CV"><%:Collecting data...%></td><td width="25%"><%:Latest Client%></td><td width="25%" align="left" id="OP_LV"><%:Collecting data...%></td></tr>
-	  	<tr><td width="25%"><%:Update Client%></td><td width="25%" align="left" id="op_up"><%:Collecting data...%></td><td width="25%"><%:Download Latest Client%></td><td width="25%" align="left" id="ma_op_up"><%:Collecting data...%></td></tr>
-	</table>
-</fieldset>
-<fieldset class="cbi-section">
-	<table width="100%">
-	  <tr>
-	  	<td width="33%">
-	  	   <p align="center" id="restore">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-	  	<td width="33%">
-	  	   <p align="center" id="remove_core">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-		  <td width="33%">
-			<p align="center" id="one_key_update_cdn">
-				<%:Collecting data...%>
-			</p>
-	   </td>
-	  </tr>
-	</table>
-</fieldset>
-<fieldset class="cbi-section">
-	<table width="100%">
-		<tr><td width="100%" colspan="4">
-	    <p align="center">
-	  		<b><%:Backup Section%></b>
-	  	</p>
-		</td></tr>
-		<tr>
-	  	<td width="25%">
-	  	   <p align="center" id="backup">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-	  	<td width="25%">
-	  	   <p align="center" id="backup_ex_core">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-	  	<td width="25%">
-	  	   <p align="center" id="backup_core_only">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-		</tr>
-		<tr>
-	  	<td width="25%">
-	  	   <p align="center" id="backup_config_only">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-	  	<td width="25%">
-	  	   <p align="center" id="backup_rule_only">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-	  	<td width="25%">
-	  	   <p align="center" id="backup_proxy_only">
-	  		   <%:Collecting data...%>
-	  	   </p>
-	  	</td>
-		</tr>
-	</table>
-</fieldset>
-
-<script type="text/javascript">//<![CDATA[
-	var core_version = document.getElementById('CORE_VERSION');
- 	var checktime = document.getElementById('CHECKTIME');
-	var cpu_model = document.getElementById('CPU_MODEL');
-	var core_meta_cv = document.getElementById('CORE_META_CV');
-	var core_meta_lv = document.getElementById('CORE_META_LV');
-	var op_cv = document.getElementById('OP_CV');
-	var op_lv = document.getElementById('OP_LV');
+<style>
+    :root {
+        --bg-white: #ffffff;
+        --bg-light: #f8fafc;
+        --bg-gray: #f1f5f9;
+        --text-primary: #374151;
+        --text-secondary: #64748b;
+        --text-title: #4d4d4d;
+        --border-color: #b1b1b1;
+        --border-light: #e2e8f0;
+        --hover-bg: #f8fafc;
+        --primary-color: #3b82f6;
+        --success-color: #059669;
+        --error-color: #dc2626;
+        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
+        --radius-sm: 6px;
+        --radius-md: 6px;
+        --transition-fast: 0.15s ease;
+        --control-height: 32px;
+        --card-bg: #ffffff;
+        --card-body-bg: #ffffff;
+        --title-bar-bg: #f8f9fa;
+        --text-color: #1f2d-3d;
+        --text-color-light: #718096;
+        --cell-bg-color: #f8f9fa;
+        --label-text-color: #343a40;
+        --title-color: #212529;
+        --tip-bg: #e6f7ff;
+        --tip-border: #91d5ff;
+        --status-red: #dc3545;
+    }
+
+    [data-darkmode="true"] {
+        --bg-white: #1f2937;
+        --bg-light: #374151;
+        --bg-gray: #4b5563;
+        --text-primary: #ebebeb;
+        --text-secondary: #d0cfcf;
+        --text-title: #e5e7eb;
+        --border-color: #939393;
+        --border-light: #6b7280;
+        --hover-bg: #374151;
+        --primary-color: #3b82f6;
+        --success-color: #34d399;
+        --error-color: #ff7070;
+        --card-bg: #1f2937;
+        --card-body-bg: #000000;
+        --title-bar-bg: #374151;
+        --text-color: #ebebeb;
+        --text-color-light: #d0cfcf;
+        --cell-bg-color: #4B5563;
+        --label-text-color: #e5e7eb;
+        --title-color: #e5e7eb;
+        --tip-bg: #1f2937;
+        --tip-border: #6b7280;
+        --status-red: #ff7070;
+    }
+    
+    [data-darkmode="true"] .info-cell-value b {
+        background-color: #000000;
+        border-color: #4a5568;
+    }
+
+    [data-darkmode="true"] #update_tip {
+        color: var(--text-secondary);
+    }
+
+    .oc-container { display: grid; gap: 6px; }
+    .oc-card { background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: 0.75rem; box-shadow: 0 0.125rem 0.25rem rgba(0,0,0,0.075); display: flex; flex-direction: column; padding: 0; overflow: hidden; position: relative; }
+    .oc-card-body { flex-grow: 1; display: flex; flex-direction: column; padding: 0.375rem; background-color: var(--card-body-bg); }
+    .oc-card-title { font-size: 1rem; font-weight: 600; color: var(--title-color); margin: 0; text-align: left; padding: 0.75rem 1.25rem; background-color: var(--title-bar-bg); border-bottom: 1px solid var(--border-color); }
+    #update_tip { text-align: center; padding: 0.75rem; border-radius: 0.375rem; background-color: var(--tip-bg); font-weight: 500; border: 1px solid var(--tip-border); margin: 0.5rem auto; grid-column: 1 / -1; }
+    .info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; flex-grow: 1; }
+    .info-cell { background-color: var(--cell-bg-color); padding: 0.7rem; border-radius: 0.75rem; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; gap: 0.75rem; position: relative; }
+    .info-cell-title { font-size: 13px; font-weight: 600; color: var(--text-color-light); }
+    .info-cell-value b { font-size: 14px; padding: 0.4rem 0.8rem; border-radius: 0.375rem; font-weight: 500; background-color: #fff; border: 1px solid var(--border-color); color: var(--text-primary); }
+    .info-cell-value .green { color: var(--success-color) !important; }
+    .info-cell-value .red { color: var(--error-color) !important; }
+    .info-cell.update-available .info-cell-value b { padding-right: 22px; position: relative; }
+    .info-cell.update-available .info-cell-value b::after { content: ''; position: absolute; top: 50%; right: 8px; transform: translateY(-50%); width: 8px; height: 8px; background-color: var(--status-red); border-radius: 50%; animation: breathing-dot 2s infinite; }
+    @keyframes breathing-dot { 0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7); } 70% { box-shadow: 0 0 0 8px rgba(220, 53, 69, 0); } 100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); } }
+
+    .dashboard-btn {
+        font-size: 11px !important;
+        font-weight: 500 !important;
+        color: white !important;
+        cursor: pointer !important;
+        border-radius: var(--radius-md) !important;
+        border: none !important;
+        background: var(--primary-color) !important;
+        transition: all var(--transition-fast) !important;
+        white-space: normal !important;
+        text-align: center !important;
+        text-decoration: none !important;
+        display: flex !important;
+        align-items: center !important;
+        justify-content: center !important;
+        line-height: 1.2 !important;
+        flex: 1 !important;
+        height: 42px !important;
+        outline: none !important;
+        padding: 2px 10px !important;
+        min-width: 45px;
+        margin: 0 !important;
+        word-break: normal;
+        overflow-wrap: break-word;
+    }
+
+    .dashboard-btn:hover {
+        background: #2563eb !important;
+    }
+    
+    .dashboard-btn.btn-danger {
+        background: #db4d6d !important;
+    }
+
+    .dashboard-btn.btn-danger:hover {
+        background: #c23656 !important;
+        filter: none;
+    }
+    
+    #actions-card .actions-grid {
+        display: grid;
+        grid-template-columns: 1fr;
+        gap: 0.5rem;
+        width: 100%;
+    }
+
+    #actions-card .actions-grid > .info-cell {
+        min-width: 0;
+    }
+
+    #actions-card .oc-action-grid {
+        display: grid;
+        grid-template-columns: 1fr auto;
+        gap: 8px;
+        align-items: center;
+        width: 100%;
+    }
+
+    #actions-card .info-cell-value {
+        width: 100%;
+    }
+    
+    #actions-card .dashboard-btn {
+        flex: none !important;
+        padding: 2px 20px !important;
+    }
+
+    .core-settings-layout {
+        display: flex;
+        flex-direction: column;
+        gap: 0.5rem;
+        flex: 1;
+    }
+    .core-settings-bottom {
+        display: grid;
+        grid-template-columns: 1fr;
+        gap: 0.5rem;
+        flex: 1;
+    }
+
+    .settings-cell {
+        background-color: var(--cell-bg-color);
+        padding: 1.25rem;
+        border-radius: 0.75rem;
+        display: flex;
+        flex-direction: column;
+        justify-content: center;
+        align-items: center;
+        gap: 1rem;
+        height: 100%;
+        box-sizing: border-box;
+        text-align: center;
+    }
+    .settings-cell label {
+        color: var(--text-color-light) !important;
+        font-weight: 600;
+        padding: 0;
+        text-align: center;
+        font-size: 13px;
+    }
+    .settings-cell .value {
+        width: 100%;
+        display: flex;
+        justify-content: center;
+    }
+    
+    #core-settings-card .settings-cell .value {
+        width: 100% !important;
+    }
+
+    #core-settings-card .segmented-control {
+        display: flex;
+        background: var(--card-bg);
+        border-radius: 6px;
+        padding: 2px;
+        gap: 2px;
+        position: relative;
+        border: 1px solid var(--border-light);
+        box-shadow: var(--shadow-sm);
+        height: 32px;
+        align-items: center;
+        white-space: nowrap;
+        width: 100% !important;
+        max-width: none !important;
+    }
+
+    #core-settings-card .segmented-indicator {
+        display: none !important;
+    }
+
+    #core-settings-card .segmented-control button {
+        flex: 1;
+        display: flex;
+        align-items: center;
+        justify-content: center;
+        text-align: center;
+        padding: 5px 10px;
+        font-size: 12px !important;
+        font-weight: 500 !important;
+        color: var(--text-color-light) !important;
+        cursor: pointer;
+        border-radius: 3px !important;
+        transition: all 0.15s ease !important;
+        user-select: none;
+        height: 26px !important;
+        line-height: 1 !important;
+        background-color: transparent !important;
+        border: none !important;
+        transform: none !important;
+    }
+
+    #core-settings-card .segmented-control button:not(.active-text):hover {
+        color: var(--text-color) !important;
+        background: rgba(59, 130, 246, 0.1) !important;
+    }
+
+    #core-settings-card .segmented-control button.active-text {
+        background-color: var(--primary-color) !important;
+        color: #ffffff !important;
+        box-shadow: var(--shadow-sm) !important;
+        transform: none !important;
+    }
+    
+    [data-darkmode="true"] #core-settings-card .segmented-control {
+        background: var(--card-bg);
+    }
+    
+    [data-darkmode="true"] #core-settings-card .segmented-control button:not(.active-text):hover {
+        background-color: rgba(59, 130, 246, 0.1) !important;
+        color: var(--text-color) !important;
+    }
+
+    #cpu-arch-display.info-cell-value,
+    #last-check-time-display.info-cell-value {
+        position: absolute;
+        top: 13px;
+        right: 15px;
+    }
+
+    #cpu-arch-display b,
+    #last-check-time-display b {
+        font-size: 11px;
+        padding: 2px 6px;
+    }
+
+    #version-update-card .action-group-buttons {
+        display: flex;
+        gap: 8px;
+        align-items: center;
+        justify-content: center;
+        width: 100%;
+    }
+    
+    #version-update-card .action-group-buttons .dashboard-btn {
+        flex: 1;
+    }
+    
+    #version-update-card .action-group-buttons .icon-btn {
+        flex: 0 0 42px;
+        height: 42px;
+    }
+
+    .icon-btn {
+        display: inline-flex;
+        align-items: center;
+        justify-content: center;
+        width: 28px;
+        height: 28px;
+        min-width: 28px;
+        border: 1px solid var(--border-color);
+        border-radius: var(--radius-sm);
+        background: var(--bg-white);
+        color: var(--text-secondary);
+        cursor: pointer;
+        transition: all var(--transition-fast);
+        padding: 0;
+    }
+
+    .icon-btn:hover {
+        background: var(--hover-bg) !important;
+        border-color: var(--primary-color) !important;
+        color: var(--primary-color) !important;
+        transform: translateY(-1px) !important;
+        box-shadow: var(--shadow-sm) !important;
+    }
+
+    .icon-btn svg {
+        width: 16px !important;
+        height: 16px !important;
+    }
+    
+    @media (min-width: 576px) {
+        #actions-card .actions-grid {
+            grid-template-columns: repeat(2, 1fr);
+        }
+    }
+    
+    @media (min-width: 390px) {
+        .core-settings-bottom {
+            grid-template-columns: 1fr 1fr;
+        }
+    }
+    
+    @media (max-width: 385px) {
+        .info-grid {
+            grid-template-columns: 1fr;
+        }
+    }
+
+    @media (max-width: 768px) {
+        .info-cell-value b {
+            font-size: 11px;
+        }
+        #cpu-arch-display b, #last-check-time-display b {
+            font-size: 10px;
+        }
+    }
+    @media (max-width: 575px) {
+        .info-cell-value b {
+            font-size: 10px;
+        }
+        #cpu-arch-display b, #last-check-time-display b {
+            font-size: 9px;
+        }
+    }
+    
+    @media (min-width: 1087px) {
+        .oc-container {
+            grid-template-columns: repeat(2, 1fr);
+        }
+        #actions-card {
+            grid-column: 1 / -1;
+        }
+    }
+
+    #version-update-card .action-group-buttons #core-path-btn-container .icon-btn {
+        height: 36px;
+        flex: 0 0 36px;
+        align-self: flex-end;
+    }
+
+    .info-cell-title {
+        font-size: 13px;
+    }
+</style>
+
+
+<p align="center" id="update_tip">
+    <b><%:Note: if the update fails, you can manually download and upload%></b>
+</p>
+
+<div class="oc-container">
+    <div class="oc-card" id="core-settings-card">
+        <h2 class="oc-card-title"><%:Core Settings%></h2>
+        <div id="cpu-arch-display" class="info-cell-value"></div>
+        <div class="oc-card-body">
+            <div class="core-settings-layout">
+                <div class="core-settings-top">
+                    <div class="settings-cell">
+                        <label for="CORE_VERSION"><%:Compiled Version%></label>
+                        <div class="value">
+                            <select class="cbi-input-select" name="CORE_VERSION" id="CORE_VERSION"></select>
+                        </div>
+                    </div>
+                </div>
+                <div class="core-settings-bottom">
+                    <div class="settings-cell">
+                        <label><%:Release Branch%></label>
+                        <div class="value">
+                            <select name="RELEASE_BRANCH" id="RELEASE_BRANCH" style="display: none;">
+                                <option value="master">Master</option>
+                                <option value="dev">Developer</option>
+                            </select>
+                            <div class="segmented-control" data-target="RELEASE_BRANCH">
+                                <div class="segmented-indicator"></div>
+                                <button type="button" data-value="master">Master</button>
+                                <button type="button" data-value="dev">Developer</button>
+                            </div>
+                        </div>
+                    </div>
+                    <div class="settings-cell">
+                        <label>
+                            <%:Smart Core%>&nbsp;<a href="javascript:void(0);" onclick="window.open('https://github.com/vernesong/mihomo/releases', '_blank');" class="info-link" title="<%:View core infos that support smart group%>">(?)</a>
+                        </label>
+                        <div class="value">
+                            <select name="SMART_ENABLE" id="SMART_ENABLE" style="display: none;">
+                                <option value="1"><%:Enable%></option>
+                                <option value="0"><%:Disable%></option>
+                            </select>
+                            <div class="segmented-control" data-target="SMART_ENABLE">
+                                <div class="segmented-indicator"></div>
+                                <button type="button" data-value="1"><%:Enable%></button>
+                                <button type="button" data-value="0"><%:Disable%></button>
+                            </div>
+                        </div>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </div>
+    
+    <div class="oc-card" id="version-update-card">
+        <h2 class="oc-card-title"><%:Version Update%></h2>
+        <div id="last-check-time-display" class="info-cell-value"></div>
+        <div class="oc-card-body">
+            <div class="info-grid">
+                <div class="info-cell" id="core-version-cell">
+                    <div class="info-cell-title"><%:Core%></div>
+                    <div class="info-cell-value" id="CORE_META_CV"><%:Collecting data...%></div>
+                </div>
+                <div class="info-cell">
+                    <div class="info-cell-value">
+                        <div class="action-group-buttons">
+                            <div id="core_meta_up"></div>
+                            <div id="ma_core_meta_up"></div>
+                            <div id="core-path-btn-container"></div>
+                        </div>
+                    </div>
+                </div>
+                <div class="info-cell" id="client-version-cell">
+                    <div class="info-cell-title"><%:Client%></div>
+                    <div class="info-cell-value" id="OP_CV"><%:Collecting data...%></div>
+                </div>
+                <div class="info-cell">
+                    <div class="info-cell-value">
+                       <div class="action-group-buttons">
+                            <div id="op_up"></div>
+                            <div id="ma_op_up"></div>
+                        </div>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </div>
+    
+    <div class="oc-card" id="actions-card">
+        <h2 class="oc-card-title"><%:Quick Actions%></h2>
+        <div class="oc-card-body">
+            <div class="actions-grid">
+                <div class="info-cell">
+                    <div class="info-cell-title"><%:Shortcuts%></div>
+                    <div class="info-cell-value">
+                        <div class="oc-action-grid">
+                            <select id="shortcuts-select" class="cbi-input-select">
+                                <option value="one_key_update_cdn"><%:Check Update%></option>
+                                <option value="restore"><%:Restore Default Config%></option>
+                                <option value="remove_core"><%:Remove Core%></option>
+                            </select>
+                            <button id="shortcuts-execute" class="dashboard-btn"><%:Execute%></button>
+                        </div>
+                    </div>
+                </div>
+                <div class="info-cell">
+                    <div class="info-cell-title"><%:Backup%></div>
+                    <div class="info-cell-value">
+                         <div class="oc-action-grid">
+                            <select id="backup-select" class="cbi-input-select">
+                                <option value="backup_all"><%:Backup OpenClash%></option>
+                                <option value="backup_no_core"><%:Backup Exclude Cores%></option>
+                                <option value="backup_only_core"><%:Backup Core%></option>
+                                <option value="backup_only_config"><%:Backup Config%></option>
+                                <option value="backup_only_rule"><%:Backup Rule Provider%></option>
+                                <option value="backup_only_proxy"><%:Backup Proxy Provider%></option>
+                            </select>
+                            <button id="backup-execute" data-backing-up="<%:Backing up...%>" class="dashboard-btn"><%:Execute%></button>
+                        </div>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </div>
+
+</div>
+
+<script type="text/javascript">
+    function createOptions(selectElement, options) {
+        selectElement.innerHTML = '';
+        options.forEach(function(option) {
+            var opt = document.createElement('option');
+            opt.value = option.value;
+            opt.innerHTML = option.text;
+            selectElement.appendChild(opt);
+        });
+    }
+
+    var coreVersionSelect = document.getElementById('CORE_VERSION');
+    var coreVersionOptions = [
+        {value: "linux-386", text: "<%:linux-386%>"},
+        {value: "linux-amd64-v1", text: "<%:linux-amd64-v1(x86-64)%>"},
+        {value: "linux-amd64-v2", text: "<%:linux-amd64-v2(x86-64)%>"},
+        {value: "linux-amd64-v3", text: "<%:linux-amd64-v3(x86-64)%>"},
+        {value: "linux-armv5", text: "<%:linux-armv5%>"},
+        {value: "linux-armv6", text: "<%:linux-armv6%>"},
+        {value: "linux-armv7", text: "<%:linux-armv7%>"},
+        {value: "linux-arm64", text: "<%:linux-arm64(armv8)%>"},
+        {value: "linux-loong64-abi1", text: "<%:linux-loong64-abi1%>"},
+        {value: "linux-loong64-abi2", text: "<%:linux-loong64-abi2%>"},
+        {value: "linux-riscv64", text: "<%:linux-riscv64%>"},
+        {value: "linux-s390x", text: "<%:linux-s390x%>"},
+        {value: "linux-mips-hardfloat", text: "<%:linux-mips-hardfloat%>"},
+        {value: "linux-mips-softfloat", text: "<%:linux-mips-softfloat%>"},
+        {value: "linux-mips64", text: "<%:linux-mips64%>"},
+        {value: "linux-mips64le", text: "<%:linux-mips64le%>"},
+        {value: "linux-mipsle-softfloat", text: "<%:linux-mipsle-softfloat%>"},
+        {value: "linux-mipsle-hardfloat", text: "<%:linux-mipsle-hardfloat%>"},
+        {value: "0", text: "<%:Not Set%>"}
+    ];
+    createOptions(coreVersionSelect, coreVersionOptions);
+
+	var last_check_time_display = document.getElementById('last-check-time-display');
+	var cpu_arch_display = document.getElementById('cpu-arch-display');
+	var core_meta_cv_container = document.getElementById('CORE_META_CV');
+    var core_version_cell = document.getElementById('core-version-cell');
+	var op_cv_container = document.getElementById('OP_CV');
+    var client_version_cell = document.getElementById('client-version-cell');
 	var core_meta_up = document.getElementById('core_meta_up');
 	var op_up = document.getElementById('op_up');
-	var update_tip = document.getElementById('update_tip');
 	var ma_core_meta_up = document.getElementById('ma_core_meta_up');
 	var ma_op_up = document.getElementById('ma_op_up');
-	var restore = document.getElementById('restore');
-	var backup = document.getElementById('backup');
-	var backup_ex_core = document.getElementById('backup_ex_core');
-	var backup_core_only = document.getElementById('backup_core_only');
-	var backup_config_only = document.getElementById('backup_config_only');
-	var backup_rule_only = document.getElementById('backup_rule_only');
-	var backup_proxy_only = document.getElementById('backup_proxy_only');
-	var one_key_update_cdn = document.getElementById('one_key_update_cdn');
-	var remove_core = document.getElementById('remove_core');
+	var update_tip = document.getElementById('update_tip');
 	var release_branch = document.getElementById('RELEASE_BRANCH');
 	var smart_enable = document.getElementById('SMART_ENABLE');
-	core_meta_up.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reload" value="<%:Check And Update%>" onclick="return core_update(this,\'Meta\')"/>';
-	op_up.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reload" value="<%:Check And Update%>" onclick="return op_update(this)"/>';
-	ma_core_meta_up.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reload" value="<%:Download%>" onclick="return ma_core_update(this,\'Meta\')"/>';
-	ma_op_up.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reload" value="<%:Download%>" onclick="return ma_op_update(this)"/>';
-	restore.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Restore Default Config%>" onclick="return restore_config(this)"/>';
-	one_key_update_cdn.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Check Update%>" onclick="return all_one_key_update_cdn(this)"/>';
-	remove_core.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Remove Core%>" onclick="return remove_all_core(this)"/>';
-	backup.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup OpenClash%>" onclick="return backup_all_file(this)"/>';
-	backup_ex_core.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup Exclude Cores%>" onclick="return backup_no_core(this)"/>';
-	backup_core_only.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup Core%>" onclick="return backup_only_core(this)"/>';
-	backup_config_only.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup Config%>" onclick="return backup_only_config(this)"/>';
-	backup_rule_only.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup Rule Provider%>" onclick="return backup_only_rule(this)"/>';
-	backup_proxy_only.innerHTML = '<input type="button" class="btn cbi-button cbi-button-reset" value="<%:Backup Proxy Provider%>" onclick="return backup_only_proxy(this)"/>';
+    
+    core_meta_up.innerHTML = '<input type="button" class="dashboard-btn btn-danger" value="<%:Update Core%>" onclick="return core_update(this,\'Meta\')"/>';
+    ma_core_meta_up.innerHTML = '<input type="button" class="dashboard-btn" value="<%:Download Core%>" onclick="return ma_core_update(this,\'Meta\')"/>';
+    op_up.innerHTML = '<input type="button" class="dashboard-btn btn-danger" value="<%:Update Client%>" onclick="return op_update(this)"/>';
+    ma_op_up.innerHTML = '<input type="button" class="dashboard-btn" value="<%:Download Client%>" onclick="return ma_op_update(this)"/>';
+
+    var pathBtnContainer = document.getElementById('core-path-btn-container');
+    if (pathBtnContainer) {
+        var pathBtn = document.createElement('button');
+        pathBtn.type = 'button';
+        pathBtn.className = 'icon-btn';
+        pathBtn.title = '<%:View Core Path%>';
+        pathBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4.5 12a.5.5 0 0 0 .5.5h6a.5.5 0 0 0 0-1h-6a.5.5 0 0 0-.5.5zm-2 1.5A2.5 2.5 0 0 1 0 11V5a2.5 2.5 0 0 1 2.5-2.5h11A2.5 2.5 0 0 1 16 5v6a2.5 2.5 0 0 1-2.5 2.5h-11zm11-1a1.5 1.5 0 0 0 1.5-1.5V5a1.5 1.5 0 0 0-1.5-1.5h-11A1.5 1.5 0 0 0 1 5v6a1.5 1.5 0 0 0 1.5 1.5h11z"/><path d="M2.5 4a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-11zm0 3a.5.5 0 0 0 0 1h11a.5.5 0 0 0 0-1h-11z"/></svg>';
+        pathBtn.addEventListener('click', function() {
+    		alert('<%:Core Path:%>\n\n/etc/openclash/core/clash_meta');
+    	});
+        pathBtnContainer.appendChild(pathBtn);
+    }
+
+    var originalTipText = document.getElementById('update_tip').innerHTML;
+    function saveSettings() {
+        var v = coreVersionSelect.value;
+        var r = release_branch.value;
+        var s = smart_enable.value;
+        var tipNode = document.getElementById('update_tip');
+        tipNode.innerHTML = '<b><%:Settings have been saved...%></b>';
+        tipNode.style.borderColor = '#4299e1';
+        
+        XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
+            setTimeout(function() {
+                tipNode.innerHTML = originalTipText;
+                tipNode.style.borderColor = 'var(--tip-border)';
+            }, 1500);
+        });
+    }
+
+    function setupSegmentedControls() {
+        document.querySelectorAll('.segmented-control').forEach(function(control) {
+            var targetId = control.dataset.target;
+            var targetSelect = document.getElementById(targetId);
+            if (!targetSelect) return;
+
+            var buttons = control.querySelectorAll('button');
+            
+            function update() {
+                var currentValue = targetSelect.value;
+                var activeButton = control.querySelector('button[data-value="' + currentValue + '"]');
+                
+                buttons.forEach(function(btn){ btn.classList.remove('active-text'); });
+                
+                if (activeButton) {
+                    activeButton.classList.add('active-text');
+                }
+            }
+
+            buttons.forEach(function(button) {
+                button.addEventListener('click', function() {
+                    if (targetSelect.value !== this.dataset.value) {
+                        targetSelect.value = this.dataset.value;
+                        update();
+                        saveSettings();
+                    }
+                });
+            });
+            update();
+        });
+    }
 
 	XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update_info")%>', null, function(x, status) {
 		if ( x && x.status == 200 ) {
 			if ( status.corever && status.corever != "0" && status.corever != "" ) {
-		  		core_version.value = status.corever;
-			}
-			else {
-		  		core_version.value = "0";
+		  		coreVersionSelect.value = status.corever;
+			} else {
+		  		coreVersionSelect.value = "0";
 			}
 			if ( status.release_branch && status.release_branch != "" ) {
 		  		release_branch.value = status.release_branch;
-			}
-			else {
+			} else {
 		  		release_branch.value = "master";
 			}
 			if ( status.smart_enable && status.smart_enable != "" ) {
 				smart_enable.value = status.smart_enable;
-			}
-			else {
+			} else {
 				smart_enable.value = "0";
 			}
 		}
 		else {
-			core_version.value = "0";
+			coreVersionSelect.value = "0";
 			release_branch.value = "master";
 			smart_enable.value = "0";
 		}
+        setupSegmentedControls();
 	});
 
-	XHR.poll(300, '<%=luci.dispatcher.build_url("admin", "services", "openclash", "get_last_version")%>', null, function(x, status) {
-	});
+	XHR.poll(300, '<%=luci.dispatcher.build_url("admin", "services", "openclash", "get_last_version")%>', null, function(x, status) {});
 	
 	function updateStatus(x, status) {
         if ( x && x.status == 200 ) {
-            cpu_model.innerHTML = status.coremodel ? "<b style=color:green>"+status.coremodel+"</b>" : "<b style=color:red><%:Model Not Found%></b>";
-            if ( status.upchecktime != "1" ) {
-                checktime.innerHTML = "<b style=color:green>"+status.upchecktime+"</b>";
+            var coreModel = status.coremodel;
+            if (coreModel) {
+                var parts = coreModel.split(' ');
+                if (parts.length >= 2 && parts[0] === parts[1]) {
+                    coreModel = parts[0];
+                }
             }
-            else {
-                checktime.innerHTML = "<b style=color:red><%:Check Failed%></b>";
+            
+            if (cpu_arch_display) {
+                while (cpu_arch_display.firstChild) { cpu_arch_display.removeChild(cpu_arch_display.lastChild); }
+                var cpu_b = document.createElement('b');
+                if (coreModel) {
+                    cpu_b.className = 'green';
+                    cpu_b.textContent = coreModel;
+                } else {
+                    cpu_b.className = 'red';
+                    cpu_b.textContent = '<%:Not Found%>';
+                }
+                cpu_arch_display.appendChild(cpu_b);
             }
-            if ( status.coremetacv == "0" ) {
-                core_meta_cv.innerHTML = "<b style=color:red><%:Unknown%></b>";
+
+            if (last_check_time_display) {
+                while (last_check_time_display.firstChild) { last_check_time_display.removeChild(last_check_time_display.lastChild); }
+                var checktime_b = document.createElement('b');
+                if ( status.upchecktime != "1" ) { checktime_b.className = 'green'; checktime_b.textContent = status.upchecktime; }
+                else { checktime_b.className = 'red'; checktime_b.textContent = '<%:Check Failed%>'; }
+                last_check_time_display.appendChild(checktime_b);
             }
-            else {
-                core_meta_cv.innerHTML = "<b style=color:green>"+status.coremetacv+"</b>";
+
+            var core_meta_cv_b = document.createElement('b');
+            if ( status.coremetacv == "0" ) { core_meta_cv_b.className = 'red'; core_meta_cv_b.textContent = '<%:Unknown%>'; }
+            else { core_meta_cv_b.className = 'green'; core_meta_cv_b.textContent = status.coremetacv; }
+            if (core_meta_cv_container) {
+                while(core_meta_cv_container.firstChild) { core_meta_cv_container.removeChild(core_meta_cv_container.lastChild); }
+                core_meta_cv_container.appendChild(core_meta_cv_b);
             }
+            
             var coremetalvis = status.corelv;
             if (coremetalvis != status.coremetacv && coremetalvis != "" && coremetalvis != "loading...") {
-               core_meta_lv.innerHTML = "<b style=color:green>"+coremetalvis+" <%:<New>%></b>";
-            }
-            else if (coremetalvis != "" && coremetalvis == status.coremetacv && coremetalvis != "loading...") {
-               core_meta_lv.innerHTML = "<b style=color:green>"+coremetalvis+"</b>";
-            }
-            else if (coremetalvis == "loading...") {
-               core_meta_lv.innerHTML = "<b style=color:green><%:Getting Last Version...%></b>";
+               core_version_cell.classList.add('update-available');
+               core_meta_cv_container.setAttribute('title', '<%:New version available%>: ' + coremetalvis);
+               core_meta_cv_container.style.cursor = 'pointer';
+               core_meta_cv_container.onclick = function() { alert(this.getAttribute('title')); };
+            } else {
+               core_version_cell.classList.remove('update-available');
+               core_meta_cv_container.removeAttribute('title');
+               core_meta_cv_container.style.cursor = '';
+               core_meta_cv_container.onclick = null;
             }
-            else {
-               core_meta_lv.innerHTML = "<b style=color:red><%:Unknown%></b>";
+
+            var op_cv_b = document.createElement('b');
+            if (status.opcv != "0") { op_cv_b.className = 'green'; op_cv_b.textContent = status.opcv; }
+            else { op_cv_b.className = 'red'; op_cv_b.textContent = '<%:Unknown%>'; }
+            if (op_cv_container) {
+                while(op_cv_container.firstChild) { op_cv_container.removeChild(op_cv_container.lastChild); }
+                op_cv_container.appendChild(op_cv_b);
             }
+            
             var oplv = status.oplv;
-            op_cv.innerHTML = status.opcv != "0" ? "<b style=color:green>"+status.opcv+"</b>" : "<b style=color:red><%:Unknown%></b>";
             if (oplv != "" && oplv != "loading..." && status.opcv != "0") {
                 function compareVersions(v1, v2) {
-                    var ver1 = v1.replace(/^v/, '').split('.');
-                    var ver2 = v2.replace(/^v/, '').split('.');
-                    
-                    var maxLen = Math.max(ver1.length, ver2.length);
+                    var ver1 = v1.replace(/^v/, '').split('.'), ver2 = v2.replace(/^v/, '').split('.'), maxLen = Math.max(ver1.length, ver2.length);
                     while (ver1.length < maxLen) ver1.push('0');
                     while (ver2.length < maxLen) ver2.push('0');
-                    
                     for (var i = 0; i < maxLen; i++) {
-                        var num1 = parseInt(ver1[i], 10);
-                        var num2 = parseInt(ver2[i], 10);
+                        var num1 = parseInt(ver1[i]), num2 = parseInt(ver2[i]);
                         if (num1 > num2) return 1;
                         if (num1 < num2) return -1;
                     }
                     return 0;
                 }
-                
                 if (compareVersions(oplv, status.opcv) > 0) {
-                    op_lv.innerHTML = "<b style=color:green>"+oplv+" <%:<New>%></b>";
+                    client_version_cell.classList.add('update-available');
+                    op_cv_container.setAttribute('title', '<%:New version available%>: ' + oplv);
+                    op_cv_container.style.cursor = 'pointer';
+                    op_cv_container.onclick = function() { alert(this.getAttribute('title')); };
                 } else {
-                    op_lv.innerHTML = "<b style=color:green>"+oplv+"</b>";
+                    client_version_cell.classList.remove('update-available');
+                    op_cv_container.removeAttribute('title');
+                    op_cv_container.style.cursor = '';
+                    op_cv_container.onclick = null;
                 }
-            }
-            else if (oplv != "" && oplv != "loading...") {
-                op_lv.innerHTML = "<b style=color:green>"+oplv+"</b>";
-            }
-            else if (oplv == "loading...") {
-                op_lv.innerHTML = "<b style=color:green><%:Getting Last Version...%></b>";
-            }
-            else {
-                op_lv.innerHTML = "<b style=color:red><%:Unknown%></b>";
+            } else {
+                client_version_cell.classList.remove('update-available');
+                op_cv_container.removeAttribute('title');
+                op_cv_container.style.cursor = '';
+                op_cv_container.onclick = null;
             }
         }
     }
 
     XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update")%>', null, updateStatus);
-    
     XHR.poll(10, '<%=luci.dispatcher.build_url("admin", "services", "openclash", "update")%>', null, updateStatus);
 
 	function handleStartLog(x, status) {
-        if ( x && x.status == 200 ) {
-            if ( status.startlog == "\n" || status.startlog == "" || status.startlog == "##FINISH##\n" ) {
-                var rdmdl = Math.floor(Math.random()*3)+1;
-                if(rdmdl == 1) {
-                    update_tip.innerHTML = '<b><font><%:Note: if the update fails, you can manually download and upload%></font></b>';
-                }
-                else if(rdmdl == 2) {
-                    update_tip.innerHTML = '<b><font><%:Note: the client may not support update, because the firmware with squashfs format will not release flash space after updating%></font></b>';
-                }
-                else if(rdmdl == 3) {
-                    update_tip.innerHTML = '<b><font><%:Note: options will auto-save when you click to update or download%></font></b>';
-                }
-            }
-            else if ( status.startlog.match("level=fatal") || status.startlog.indexOf("FTL [Config]") != "-1" ) {
-                XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "del_start_log")%>', null, function(x) {});
-                if ( status.startlog.match("level=fatal") ) {
-                    alert('<%:OpenClash Start Failed%> :\n\n' + status.startlog.split('msg=')[1]);
-                }
-                else {
-                    alert('<%:OpenClash Start Failed%> :\n\n' + status.startlog.split('FTL [Config] ')[1]);
-                }
-            }
-            else if ( status.startlog != "\n" && status.startlog != "" && status.startlog != "##FINISH##\n" ) {
-                if ( status.startlog.match("Tip:") || status.startlog.match("提示：")) {
-                    update_tip.innerHTML = '<b style=color:#ff6f00>'+status.startlog+'</b>';
-                }
-                else if ( status.startlog.match("Error:") || status.startlog.match("错误：")) {
-                    update_tip.innerHTML = '<b style=color:#FF0000>'+status.startlog+'</b>';
-                }
-                else if ( status.startlog.match("Warning:") || status.startlog.match("警告：")) {
-                    update_tip.innerHTML = '<b style=color:#ff00bb>'+status.startlog+'</b>';
-                }
-                else if ( status.startlog.match("Watchdog:") || status.startlog.match("守护程序：")) {
-                    update_tip.innerHTML = '<b style=color:#b300ff>'+status.startlog+'</b>';
-                }
-                else {
-                    update_tip.innerHTML = '<b style=color:green>'+status.startlog+'</b>';
-                }
-            }
-        }
-    }
+		if (x && x.status == 200) {
+			if (status.startlog == "\n" || status.startlog == "" || status.startlog == "##FINISH##\n") {
+				const tips = [
+					'<b><font><%:Note: if the update fails, you can manually download and upload%></font></b>',
+					'<b><font><%:Note: the client may not support update, because the firmware with squashfs format will not release flash space after updating%></font></b>',
+					'<b><font><%:Note: options will auto-save when you click to update or download%></font></b>'
+				];
+				update_tip.innerHTML = tips[Math.floor(Math.random() * 3)];
+			}
+			else if (status.startlog.match("level=fatal") || status.startlog.indexOf("FTL [Config]") != -1) {
+				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "del_start_log")%>', null, function(x) {});
+				alert('<%:OpenClash Start Failed%> :\n\n' +
+					(status.startlog.match("level=fatal") ? status.startlog.split('msg=')[1] : status.startlog.split('FTL [Config] ')[1])
+				);
+			}
+			else if (status.startlog != "\n" && status.startlog != "" && status.startlog != "##FINISH##\n") {
+				let color = "green";
+				if (status.startlog.match("Tip:") || status.startlog.match("提示：")) {
+					color = "#ff6f00";
+				} else if (status.startlog.match("Error:") || status.startlog.match("错误：")) {
+					color = "#FF0000";
+				} else if (status.startlog.match("Warning:") || status.startlog.match("警告：")) {
+					color = "#ff00bb";
+				} else if (status.startlog.match("Watchdog:") || status.startlog.match("守护程序：")) {
+					color = "#b300ff";
+				}
+				update_tip.innerHTML = `<b style=color:${color}>${status.startlog}</b>`;
+			}
+		}
+	}
 
     XHR.poll(3, '<%=luci.dispatcher.build_url("admin", "services", "openclash", "startlog")%>', null, handleStartLog);
 	
-	function core_update(btn,type)
-    {
-    	var v = core_version.value;
-    	var r = release_branch.value;
-		var s = smart_enable.value;
+	function core_update(btn,type) {
+    	var v = coreVersionSelect.value, r = release_branch.value, s = smart_enable.value;
+		btn.disabled = true;
 		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
 			if (x && x.status == 200) {
-				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "coreupdate")%>', {core_type: type}, function(x, status) {
-					btn.value    = '<%:Check And Update%>';
-					btn.disabled = false;
-					return false;
-				});
-			}
+				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "coreupdate")%>', {core_type: type}, function(x, status) { btn.disabled = false; });
+			} else { btn.disabled = false; }
 		});
     }
 
-	function op_update(btn)
-    {
-        var v = core_version.value;
-    	var r = release_branch.value;
-		var s = smart_enable.value;
+	function op_update(btn) {
+        var v = coreVersionSelect.value, r = release_branch.value, s = smart_enable.value;
+		btn.disabled = true;
 		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
 			if (x && x.status == 200) {
-				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "opupdate")%>', null, function(x, status) {
-					btn.value    = '<%:Check And Update%>';
-					btn.disabled = false;
-					return false;
-				});
-			}
+				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "opupdate")%>', null, function(x, status) { btn.disabled = false; });
+			} else { btn.disabled = false; }
 		});
     }
     
-    function ma_core_update(btn,type)
-    {
-    	var v = core_version.value;
-		var r = release_branch.value;
-		var s = smart_enable.value;
+    function ma_core_update(btn,type) {
+    	var v = coreVersionSelect.value, r = release_branch.value, s = smart_enable.value;
 		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
-		if (x && x.status == 200) {
-			btn.value    = '<%:Download%>';
-			btn.disabled = false;
-			XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update_ma")%>', status.corever, function(x, status) {
-			if ( x && x.status == 200 ) {
-				if ( status.corever != "0" ) {
-					if (type == "Meta") {
-						if (s == "1") {
-							url4='https://raw.githubusercontent.com/vernesong/OpenClash/core/'+r+'/smart/clash-'+status.corever+'.tar.gz';
-							window.location.href=url4;
-						}
-						else {
-							url4='https://raw.githubusercontent.com/vernesong/OpenClash/core/'+r+'/meta/clash-'+status.corever+'.tar.gz';
-							window.location.href=url4;
-						}
-					}
-				}
-				else {
-					alert('<%:No Compiled Version is Selected, Please Select on The Top and Try Again!%>')
-				}
-			}
-       		});
-        return false;
-    	}
+    		if (x && x.status == 200) {
+    			XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update_ma")%>', {core_type: type}, function(x, status) {
+        			if ( x && x.status == 200 && status.corever && status.corever != "0" ) {
+						var url;
+						if (s == "1") { url ='https://raw.githubusercontent.com/vernesong/OpenClash/core/'+r+'/smart/clash-'+status.corever+'.tar.gz'; }
+                        else { url ='https://raw.githubusercontent.com/vernesong/OpenClash/core/'+r+'/meta/clash-'+status.corever+'.tar.gz'; }
+						window.location.href = url;
+        			} else { alert('<%:No Compiled Version is Selected, Please Select on The Top and Try Again!%>'); }
+           		});
+    		}
       });
     }
     
-    function ma_op_update(btn)
-    {
-        btn.value    = '<%:Download%>';
-        btn.disabled = false;
-        var v = core_version.value;
-		var r = release_branch.value;
-		var s = smart_enable.value;
+    function ma_op_update(btn) {
+        var v = coreVersionSelect.value, r = release_branch.value, s = smart_enable.value;
 		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
 			if (x && x.status == 200) {
-				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update_ma")%>', status.oplv, function(x, status) {
-					if ( x && x.status == 200 ) {
+				XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "update_ma")%>', null, function(x, status) {
+					if ( x && x.status == 200 && status.oplv && status.oplv != "" && status.oplv != "loading..." ) {
 						var oplv = status.oplv.substring(status.oplv.indexOf("v") + 1);
-						if ( oplv != "" && oplv != "loading..." ) {
-							if (status.pkg_type == "apk") {
-								url2='https://raw.githubusercontent.com/vernesong/OpenClash/package/'+r+'/luci-app-openclash-'+oplv+'.apk';
-							}
-							else {
-								url2='https://raw.githubusercontent.com/vernesong/OpenClash/package/'+r+'/luci-app-openclash_'+oplv+'_all.ipk';
-							}
-							window.location.href=url2;
-						}
-						else {
-							alert('<%:Failed to get the latest version. Please try again later!%>')
-						}
-					}
+						var url;
+						if (status.pkg_type == "apk") { url ='https://raw.githubusercontent.com/vernesong/OpenClash/package/'+r+'/luci-app-openclash-'+oplv+'.apk'; }
+                        else { url ='https://raw.githubusercontent.com/vernesong/OpenClash/package/'+r+'/luci-app-openclash_'+oplv+'_all.ipk'; }
+						window.location.href = url;
+					} else { alert('<%:Failed to get the latest version. Please try again later!%>'); }
 				});
 			}
         });
-        return false; 
     }
     
-    function remove_all_core(btn)
-    {
-        btn.value    = '<%:Remove Core%>';
+    function restore_config(btn) {
+        if (!confirm("<%:Are you sure to restore the default configuration?%>")) return;
+        return false;
+    }
+
+    function remove_all_core(btn) {
+		if (!confirm("<%:Are you sure want to remove all core files?%>")) return;
         btn.disabled = true;
-        var r = confirm("<%:Are you sure want to remove all core files?%>")
-        if (r == true) {
         XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "remove_all_core")%>', null, function(x, status) {
-        	if ( x && x.status == 200 ) {
-        		alert('<%:Remove succeeded!%>')
-        	}
-          	else {
-            alert('<%:Remove failed!%>')
-           }
+        	if ( x && x.status == 200 ) { alert('<%:Remove succeeded!%>'); }
+            else { alert('<%:Remove failed!%>'); }
+			btn.disabled = false;
         });
-        } else {
-        }
-        btn.disabled = false;
-        return false; 
     }
     
-    function backup_all_file(btn)
-    {
-		btn.value    = '<%:Backup OpenClash%>';
-		btn.disabled = true;
-		window.location.href='<%="backup"%>';
-		btn.disabled = false;
-		return false; 
+    function triggerDownload(url) {
+        var a = document.createElement('a');
+        a.style.display = 'none';
+        a.href = url;
+        a.setAttribute('download', '');
+        document.body.appendChild(a);
+        a.click();
+        document.body.removeChild(a);
     }
+    
+    function backup_all_file() { triggerDownload('<%="backup"%>'); }
+    function backup_no_core() { triggerDownload('<%="backup_ex_core"%>'); }
+    function backup_only_core() { triggerDownload('<%="backup_only_core"%>'); }
+    function backup_only_config() { triggerDownload('<%="backup_only_config"%>'); }
+    function backup_only_rule() { triggerDownload('<%="backup_only_rule"%>'); }
+    function backup_only_proxy() { triggerDownload('<%="backup_only_proxy"%>'); }
 
-    function backup_no_core(btn)
-    {
-		btn.value    = '<%:Backup Exclude Cores%>';
+	function all_one_key_update_cdn(btn) {
+    	var v = coreVersionSelect.value, r = release_branch.value, s = smart_enable.value;
 		btn.disabled = true;
-		window.location.href='<%="backup_ex_core"%>';
-		btn.disabled = false;
-		return false; 
+		btn.value = '<%:Checking...%>';
+		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
+			if (x && x.status == 200) {
+				select_git_cdn("one_key_update");
+			}
+			btn.value = '<%:Check Update%>';
+			btn.disabled = false;
+		});
     }
 
-    function backup_only_core(btn)
-    {
-		btn.value    = '<%:Backup Core%>';
-		btn.disabled = true;
-		window.location.href='<%="backup_only_core"%>';
-		btn.disabled = false;
-		return false; 
-    }
+    document.getElementById('shortcuts-execute').addEventListener('click', function() {
+        var select = document.getElementById('shortcuts-select');
+        var selectedAction = select.value;
+        var button = this;
 
-    function backup_only_config(btn)
-    {
-		btn.value    = '<%:Backup Config%>';
-		btn.disabled = true;
-		window.location.href='<%="backup_only_config"%>';
-		btn.disabled = false;
-		return false; 
-    }
+        switch (selectedAction) {
+            case 'one_key_update_cdn':
+                all_one_key_update_cdn(button);
+                break;
+            case 'restore':
+                restore_config(button);
+                break;
+            case 'remove_core':
+                remove_all_core(button);
+                break;
+        }
+    });
 
-    function backup_only_rule(btn)
-    {
-		btn.value    = '<%:Backup Rule Provider%>';
-		btn.disabled = true;
-		window.location.href='<%="backup_only_rule"%>';
-		btn.disabled = false;
-		return false; 
-    }
+    document.getElementById('backup-execute').addEventListener('click', function() {
+        var select = document.getElementById('backup-select');
+        var selectedAction = select.value;
+        var button = this;
+        var originalText = button.textContent;
 
-    function backup_only_proxy(btn)
-    {
-		btn.value    = '<%:Backup Proxy Provider%>';
-		btn.disabled = true;
-		window.location.href='<%="backup_only_proxy"%>';
-		btn.disabled = false;
-		return false; 
-    }
+        button.disabled = true;
+        button.textContent = button.dataset.backingUp;
 
-	function all_one_key_update_cdn(btn)
-    {
-    	var v = core_version.value;
-		var r = release_branch.value;
-		var s = smart_enable.value;
-		XHR.get('<%=luci.dispatcher.build_url("admin", "services", "openclash", "save_corever_branch")%>', {core_ver: v, release_branch: r, smart_enable: s}, function(x, status) {
-			if (x && x.status == 200) {
-				btn.value    = '<%:Check Update%>';
-				btn.disabled = false;
-				return select_git_cdn("one_key_update");
-			}
-		});
-    }
+        setTimeout(function() {
+            button.disabled = false;
+            button.textContent = originalText;
+        }, 8000);
 
-//]]></script>
+        switch (selectedAction) {
+            case 'backup_all':
+                backup_all_file();
+                break;
+            case 'backup_no_core':
+                backup_no_core();
+                break;
+            case 'backup_only_core':
+                backup_only_core();
+                break;
+            case 'backup_only_config':
+                backup_only_config();
+                break;
+            case 'backup_only_rule':
+                backup_only_rule();
+                break;
+            case 'backup_only_proxy':
+                backup_only_proxy();
+                break;
+        }
+    });
+</script>
